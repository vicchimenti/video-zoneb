<div class="popupVideoWrapper" id="id<t4 type='meta' meta='content_id' />">
  <div class="popupVideo">
    <a class="media-helper" target="_blank" id="video<t4 type='meta' meta='content_id' />">
      <img class="img-responsive media-thumbnail" alt="" id="image<t4 type='meta' meta='content_id' />">
    <i class="fa fa-5x fa-play-circle-o play-button"></i> </a>
    <p><t4 type="content" name="Video Description" output="normal" modifiers="striptags,htmlentities" /></p>
  </div>
  <div class="sidebottom"></div>
</div>

<script>
  (function() {
    var youtubeID = "<t4 type='content' name='Youtube Video ID' output='normal' modifiers='striptags,htmlentities' />",
        vimeoID = "<t4 type='content' name='Vimeo Video ID' output='normal' modifiers='striptags,htmlentities' />",
        url = '',
        href = '',
        data = '',
        src = '';
        // var videoTitle = '';
    if (youtubeID) {
      href = '//www.youtube.com/watch?v=' + youtubeID;
      src = '//img.youtube.com/vi/' + youtubeID + '/mqdefault.jpg';
      addAttr();
    }
    else if (vimeoID) {
      href = '//vimeo.com/' + vimeoID;
      url = '//vimeo.com/api/oembed.json?url=' + href + '';
      var statusText = "no thumbnail";
      $.getJSON = async (url) => {
        try {
          var response = await fetch(url);
          if (!response.ok)
            // check if response worked (no 404 errors etc...)
            throw new Error(response.statusText);

          data = await response.json(); // get JSON from the response
          // return data; // returns a promise, which resolves to this data value
          addAttr();

        } catch (error) {
          return error;
        }
        // href = data.html;
        // src = data.thumbnail_url_with_play_button;
        // addAttr();
      };
      // console.log(data);
      // getJSON('//vimeo.com/api/oembed.json?url=' + href + '', function(data) {
      //   src = data.key;
      //   addAttr();
      // });
    }
    
    function addAttr() {
      document.getElementById("video<t4 type='meta' meta='content_id' />").setAttribute('href', href);
      document.getElementById("image<t4 type='meta' meta='content_id' />").setAttribute('src', src);
    }
  })();
</script>